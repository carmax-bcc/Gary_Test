using System.Linq;

namespace MPGTest
{
  public static class MPGCalc
  {
    static public double? GetAverageMpg(IEnumerable<Vehicle>? vehicles, string make)
    {
      #region Solution
      if (vehicles is null || !vehicles.Any() || string.IsNullOrEmpty(make))
      {
        return null;
      }

      double total = 0.0;
      int count = 0;
      foreach (Vehicle vehicle in vehicles.Where(vehicle => !string.IsNullOrEmpty(vehicle.Make)
                                                            && vehicle.Make.ToUpper() == make.ToUpper()))
      {
        total += vehicle.MPG;
        count++;
      }

      return count == 0 ? null : (total / count);
      #endregion
    }
  }
}
